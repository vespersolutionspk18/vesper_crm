{"version":3,"file":"Login-ecf9304f.js","sources":["../../../../frontend/src/pages/Login.vue"],"sourcesContent":["<template>\n  <div class=\"flex h-screen w-screen justify-center bg-gray-100\">\n    <div class=\"mt-32 w-full px-4\">\n      <CRMLogo class=\"mx-auto h-10\" />\n      <div class=\"mt-6 flex items-center justify-center space-x-1.5\">\n        <span class=\"text-3xl font-semibold text-gray-900\">Login to CRM</span>\n      </div>\n      <div class=\"mx-auto mt-6 w-full px-4 sm:w-96\">\n        <form\n          v-if=\"showEmailLogin\"\n          method=\"POST\"\n          action=\"/api/method/login\"\n          @submit.prevent=\"submit\"\n        >\n          <div>\n            <FormControl\n              variant=\"outline\"\n              size=\"md\"\n              :type=\"\n                (email || '').toLowerCase() === 'administrator'\n                  ? 'text'\n                  : 'email'\n              \"\n              label=\"Email\"\n              v-model=\"email\"\n              placeholder=\"jane@example.com\"\n              :disabled=\"session.login.loading\"\n            />\n          </div>\n          <div class=\"mt-4\">\n            <FormControl\n              variant=\"outline\"\n              size=\"md\"\n              label=\"Password\"\n              v-model=\"password\"\n              placeholder=\"••••••\"\n              :disabled=\"session.login.loading\"\n              type=\"password\"\n            />\n          </div>\n          <ErrorMessage class=\"mt-2\" :message=\"session.login.error\" />\n          <Button\n            variant=\"solid\"\n            class=\"mt-6 w-full\"\n            :loading=\"session.login.loading\"\n          >\n            Login\n          </Button>\n          <button\n            v-if=\"authProviders.data.length\"\n            class=\"mt-2 w-full py-2 text-base text-gray-600\"\n            @click=\"showEmailLogin = false\"\n          >\n            Login using other methods\n          </button>\n        </form>\n        <div\n          class=\"mx-auto space-y-2\"\n          v-if=\"authProviders.data && !showEmailLogin\"\n        >\n          <Button @click=\"showEmailLogin = true\" variant=\"solid\" class=\"w-full\">\n            Login via email\n          </Button>\n          <a\n            class=\"flex justify-center items-center gap-2 w-full rounded border bg-gray-900 px-3 py-1 text-center text-base h-7 focus:outline-none focus:ring-2 focus:ring-gray-400 text-white transition-colors hover:bg-gray-700\"\n            v-for=\"provider in authProviders.data\"\n            :key=\"provider.name\"\n            :href=\"provider.auth_url\"\n          >\n            <div v-if=\"provider.icon\" v-html=\"provider.icon\" />\n            Login via {{ provider.provider_name }}\n          </a>\n        </div>\n      </div>\n    </div>\n  </div>\n</template>\n<script setup>\nimport CRMLogo from '@/components/Icons/CRMLogo.vue';\nimport { sessionStore } from '@/stores/session'\nimport { createResource } from 'frappe-ui'\nimport { ref } from 'vue'\n\nconst session = sessionStore()\nlet showEmailLogin = ref(false)\nlet email = ref('')\nlet password = ref('')\n\nlet authProviders = createResource({\n  url: 'crm.api.auth.oauth_providers',\n  auto: true,\n  onSuccess(data) {\n    showEmailLogin.value = data.length === 0\n  },\n})\nauthProviders.fetch()\n\nfunction submit() {\n  session.login.submit({\n    usr: email.value,\n    pwd: password.value,\n  })\n}\n</script>\n"],"names":["session","sessionStore","showEmailLogin","ref","email","password","authProviders","createResource","data","submit"],"mappings":"glBAmFA,MAAMA,EAAUC,EAAc,EAC9B,IAAIC,EAAiBC,EAAI,EAAK,EAC1BC,EAAQD,EAAI,EAAE,EACdE,EAAWF,EAAI,EAAE,EAEjBG,EAAgBC,EAAe,CACjC,IAAK,+BACL,KAAM,GACN,UAAUC,EAAM,CACdN,EAAe,MAAQM,EAAK,SAAW,CACxC,CACH,CAAC,EACDF,EAAc,MAAO,EAErB,SAASG,GAAS,CAChBT,EAAQ,MAAM,OAAO,CACnB,IAAKI,EAAM,MACX,IAAKC,EAAS,KAClB,CAAG,CACH"}