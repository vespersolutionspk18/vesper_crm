{"version":3,"file":"views-43c0d23f.js","sources":["../../../../frontend/src/components/Icons/PinIcon.vue","../../../../frontend/src/stores/views.js"],"sourcesContent":["<template>\n  <svg\n    width=\"16\"\n    height=\"16\"\n    viewBox=\"0 0 16 16\"\n    fill=\"none\"\n    xmlns=\"http://www.w3.org/2000/svg\"\n  >\n    <path\n      fill-rule=\"evenodd\"\n      clip-rule=\"evenodd\"\n      d=\"M6.17683 1C4.89138 1 3.81543 1.97482 3.68896 3.25405L3.19111 8.2899C3.16577 8.54615 3.0749 8.79156 2.92723 9.00252L1.98134 10.3538C1.51739 11.0166 1.99155 11.9273 2.80057 11.9273H7.53349V14.4999C7.53349 14.7761 7.75735 14.9999 8.03349 14.9999C8.30963 14.9999 8.53349 14.7761 8.53349 14.4999V11.9273H13.2016C14.0107 11.9273 14.4848 11.0166 14.0209 10.3538L13.068 8.99254C12.9236 8.78634 12.8335 8.54713 12.8059 8.29695L12.246 3.22567C12.1062 1.95882 11.0357 1 9.76113 1H6.17683ZM4.68411 3.35243C4.75999 2.5849 5.40556 2 6.17683 2H9.76113C10.5259 2 11.1682 2.57529 11.2521 3.3354L11.8119 8.40668C11.858 8.82365 12.0082 9.22233 12.2488 9.566L13.2016 10.9273H2.80057L3.74646 9.57598C3.99257 9.22439 4.14403 8.81536 4.18625 8.38828L4.68411 3.35243Z\"\n      fill=\"currentColor\"\n    />\n  </svg>\n</template>\n","import { defineStore } from 'pinia'\nimport { createResource } from 'frappe-ui'\nimport { reactive, ref } from 'vue'\n\nexport const viewsStore = defineStore('crm-views', (doctype) => {\n  let viewsByName = reactive({})\n  let pinnedViews = ref([])\n  let publicViews = ref([])\n  let defaultView = ref({})\n\n  // Views\n  const views = createResource({\n    url: 'crm.api.views.get_views',\n    params: { doctype: doctype || '' },\n    cache: 'crm-views',\n    initialData: [],\n    auto: true,\n    transform(views) {\n      pinnedViews.value = []\n      publicViews.value = []\n      for (let view of views) {\n        viewsByName[view.name] = view\n        view.type = view.type || 'list'\n        if (view.pinned) {\n          pinnedViews.value?.push(view)\n        }\n        if (view.public) {\n          publicViews.value?.push(view)\n        }\n        if (view.is_default && view.dt) {\n          defaultView.value[view.dt + ' ' + view.type] = view\n        }\n      }\n      return views\n    },\n  })\n\n  function getView(view, type, doctype = null) {\n    type = type || 'list'\n    if (!view && doctype) {\n      return defaultView.value[doctype + ' ' + type] || null\n    }\n    return viewsByName[view]\n  }\n\n  function getPinnedViews() {\n    if (!pinnedViews.value?.length) return []\n    return pinnedViews.value\n  }\n\n  function getPublicViews() {\n    if (!publicViews.value?.length) return []\n    return publicViews.value\n  }\n\n  async function reload() {\n    await views.reload()\n  }\n\n  return {\n    views,\n    defaultView,\n    getPinnedViews,\n    getPublicViews,\n    reload,\n    getView,\n  }\n})\n"],"names":["_hoisted_1","_hoisted_2","_createElementVNode","_hoisted_3","_cache","viewsStore","defineStore","doctype","viewsByName","reactive","pinnedViews","ref","publicViews","defaultView","views","createResource","view","_a","_b","getView","type","getPinnedViews","getPublicViews","reload"],"mappings":"gGAEIA,EAAU,CACV,WACA,YACA,QAAW,YACX,gDAGEC,EAAmBC,EAAA,OAAA,CACnB,YAAU,UACV,YAA2uB,UAC3uB,EAAA,wwBACAC,EAAA,iBACEC,EAAA,qDCVKC,EAAaC,EAAY,YAAcC,GAAY,CAC9D,IAAIC,EAAcC,EAAS,EAAE,EACzBC,EAAcC,EAAI,EAAE,EACpBC,EAAcD,EAAI,EAAE,EACpBE,EAAcF,EAAI,EAAE,EAGxB,MAAMG,EAAQC,EAAe,CAC3B,IAAK,0BACL,OAAQ,CAAE,QAASR,GAAW,EAAI,EAClC,MAAO,YACP,YAAa,CAAE,EACf,KAAM,GACN,UAAUO,EAAO,SACfJ,EAAY,MAAQ,CAAE,EACtBE,EAAY,MAAQ,CAAE,EACtB,QAASI,KAAQF,EACfN,EAAYQ,EAAK,IAAI,EAAIA,EACzBA,EAAK,KAAOA,EAAK,MAAQ,OACrBA,EAAK,UACPC,EAAAP,EAAY,QAAZ,MAAAO,EAAmB,KAAKD,IAEtBA,EAAK,UACPE,EAAAN,EAAY,QAAZ,MAAAM,EAAmB,KAAKF,IAEtBA,EAAK,YAAcA,EAAK,KAC1BH,EAAY,MAAMG,EAAK,GAAK,IAAMA,EAAK,IAAI,EAAIA,GAGnD,OAAOF,CACR,CACL,CAAG,EAED,SAASK,EAAQH,EAAMI,EAAMb,EAAU,KAAM,CAE3C,OADAa,EAAOA,GAAQ,OACX,CAACJ,GAAQT,EACJM,EAAY,MAAMN,EAAU,IAAMa,CAAI,GAAK,KAE7CZ,EAAYQ,CAAI,CACxB,CAED,SAASK,GAAiB,OACxB,OAAKJ,EAAAP,EAAY,QAAZ,MAAAO,EAAmB,OACjBP,EAAY,MADoB,CAAE,CAE1C,CAED,SAASY,GAAiB,OACxB,OAAKL,EAAAL,EAAY,QAAZ,MAAAK,EAAmB,OACjBL,EAAY,MADoB,CAAE,CAE1C,CAED,eAAeW,GAAS,CACtB,MAAMT,EAAM,OAAQ,CACrB,CAED,MAAO,CACL,MAAAA,EACA,YAAAD,EACA,eAAAQ,EACA,eAAAC,EACA,OAAAC,EACA,QAAAJ,CACD,CACH,CAAC"}