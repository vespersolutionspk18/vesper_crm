import{s as L,k as f,x as C,r as p,b as a,c as l,e as r,d as i,u as t,p as k,K as c,w as y,l as g,F as V,f as M,H as _,t as B}from"./index-9a3d44ca.js";import{C as E}from"./CRMLogo-c061fa7d.js";const S={class:"flex h-screen w-screen justify-center bg-gray-100"},j={class:"mt-32 w-full px-4"},F=r("div",{class:"mt-6 flex items-center justify-center space-x-1.5"},[r("span",{class:"text-3xl font-semibold text-gray-900"},"Login to CRM")],-1),N={class:"mx-auto mt-6 w-full px-4 sm:w-96"},R={class:"mt-4"},T={key:1,class:"mx-auto space-y-2"},H=["href"],P=["innerHTML"],K={__name:"Login",setup(z){const u=L();let s=f(!1),n=f(""),d=f(""),m=C({url:"crm.api.auth.oauth_providers",auto:!0,onSuccess(x){s.value=x.length===0}});m.fetch();function b(){u.login.submit({usr:n.value,pwd:d.value})}return(x,o)=>{const h=p("FormControl"),w=p("ErrorMessage"),v=p("Button");return a(),l("div",S,[r("div",j,[i(E,{class:"mx-auto h-10"}),F,r("div",N,[t(s)?(a(),l("form",{key:0,method:"POST",action:"/api/method/login",onSubmit:k(b,["prevent"])},[r("div",null,[i(h,{variant:"outline",size:"md",type:(t(n)||"").toLowerCase()==="administrator"?"text":"email",label:"Email",modelValue:t(n),"onUpdate:modelValue":o[0]||(o[0]=e=>c(n)?n.value=e:n=e),placeholder:"jane@example.com",disabled:t(u).login.loading},null,8,["type","modelValue","disabled"])]),r("div",R,[i(h,{variant:"outline",size:"md",label:"Password",modelValue:t(d),"onUpdate:modelValue":o[1]||(o[1]=e=>c(d)?d.value=e:d=e),placeholder:"••••••",disabled:t(u).login.loading,type:"password"},null,8,["modelValue","disabled"])]),i(w,{class:"mt-2",message:t(u).login.error},null,8,["message"]),i(v,{variant:"solid",class:"mt-6 w-full",loading:t(u).login.loading},{default:y(()=>[_(" Login ")]),_:1},8,["loading"]),t(m).data.length?(a(),l("button",{key:0,class:"mt-2 w-full py-2 text-base text-gray-600",onClick:o[2]||(o[2]=e=>c(s)?s.value=!1:s=!1)}," Login using other methods ")):g("",!0)],32)):g("",!0),t(m).data&&!t(s)?(a(),l("div",T,[i(v,{onClick:o[3]||(o[3]=e=>c(s)?s.value=!0:s=!0),variant:"solid",class:"w-full"},{default:y(()=>[_(" Login via email ")]),_:1}),(a(!0),l(V,null,M(t(m).data,e=>(a(),l("a",{class:"flex justify-center items-center gap-2 w-full rounded border bg-gray-900 px-3 py-1 text-center text-base h-7 focus:outline-none focus:ring-2 focus:ring-gray-400 text-white transition-colors hover:bg-gray-700",key:e.name,href:e.auth_url},[e.icon?(a(),l("div",{key:0,innerHTML:e.icon},null,8,P)):g("",!0),_(" Login via "+B(e.provider_name),1)],8,H))),128))])):g("",!0)])])])}}};export{K as default};
//# sourceMappingURL=Login-ecf9304f.js.map
