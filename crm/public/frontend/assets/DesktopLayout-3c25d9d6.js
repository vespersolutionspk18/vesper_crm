import{_ as F}from"./Section-e7f6a7fa.js";import{E as H}from"./EmailIcon-5d882006.js";import{v as R,P as W}from"./views-43c0d23f.js";import{_ as U,a as N,C as q}from"./CallUI-6bc1ab54.js";import{L as B}from"./LeadsIcon-6f6c2324.js";import{D as S}from"./DealsIcon-3bb51480.js";import{C as D}from"./ContactsIcon-5941e60f.js";import{O as P}from"./OrganizationsIcon-f5eb7efc.js";import{N as M}from"./NoteModal-67a2219e.js";import{T as Y}from"./TaskIcon-ba34b83b.js";import{P as O}from"./PhoneIcon-2b0b9034.js";import{_ as G,b as s,c as i,e,k as J,o as K,a as T,r as C,u as o,t as f,d as n,w as m,F as I,f as z,g as x,n as g,O as Q,l as w,i as X,B as Z,D as ee,L as te}from"./index-9a3d44ca.js";import{n as d,N as A}from"./notifications-e6bf153f.js";import{W as oe}from"./WhatsAppIcon-a922c570.js";import{M as se}from"./MarkAsDoneIcon-eb32e216.js";import{g as ae,_ as V,a as ne}from"./global-005ed632.js";import{t as le}from"./index-23e032df.js";import{o as ie,a as re}from"./Dropdown-d1bc143c.js";import"./FileUploader-e02978ad.js";import"./Fields-bccd83f4.js";import"./NestedPopover-767b5999.js";import"./EditIcon-5c615a04.js";import"./IndicatorIcon-8bdc1dd8.js";import"./Link-b1fdcf99.js";import"./settings-5e848745.js";import"./CRMLogo-c061fa7d.js";import"./contacts-111adff3.js";import"./ArrowUpRightIcon-4de3e6ce.js";const ce={},de={width:"18",height:"18",viewBox:"0 0 18 18",fill:"none",xmlns:"http://www.w3.org/2000/svg"},_e=e("path",{d:"M10.875 9.06223L3 9.06232",stroke:"currentColor","stroke-linecap":"round","stroke-linejoin":"round"},null,-1),ue=e("path",{d:"M6.74537 5.31699L3 9.06236L6.74527 12.8076",stroke:"currentColor","stroke-linecap":"round","stroke-linejoin":"round"},null,-1),me=e("path",{d:"M14.1423 4L14.1423 14.125",stroke:"currentColor","stroke-linecap":"round"},null,-1),pe=[_e,ue,me];function fe(b,u){return s(),i("svg",de,pe)}const he=G(ce,[["render",fe]]),ge={class:"flex h-screen flex-col"},xe={class:"z-20 flex items-center justify-between border-b bg-white px-5 py-2.5"},be={class:"text-base font-medium"},ve={class:"flex gap-1"},ye={key:0,class:"divide-y overflow-auto text-base"},ke={class:"mt-1 flex items-center gap-2.5"},Ce=["innerHTML"],we={key:1,class:"mb-2 space-x-1 leading-5 text-gray-600"},$e={class:"font-medium text-gray-900"},Le={class:"font-medium text-gray-900"},Ne={class:"text-sm text-gray-600"},Ie={key:1,class:"flex flex-1 flex-col items-center justify-center gap-2"},ze={class:"text-lg font-medium text-gray-500"},Be={__name:"Notifications",setup(b){const{$socket:u}=ae(),p=J(null);ie(p,()=>{d().visible&&v()},{ignore:["#notifications-btn"]});function v(){d().toggle()}function c(a){d().mark_doc_as_read(a)}K(()=>{u.off("crm_notification")}),T(()=>{u.on("crm_notification",()=>{d().notifications.reload()})});function $(a){let _={leadId:a.reference_name};return a.route_name==="Deal"&&(_={dealId:a.reference_name}),{name:a.route_name,params:_,hash:"#"+a.comment||a.notification_type_doc}}return T(()=>{}),(a,_)=>{var k;const y=C("Button"),r=C("FeatherIcon"),l=C("RouterLink");return o(d)().visible?(s(),i("div",{key:0,ref_key:"target",ref:p,class:"absolute z-20 h-screen bg-white transition-all duration-300 ease-in-out",style:Q({"box-shadow":"8px 0px 8px rgba(0, 0, 0, 0.1)","max-width":"350px","min-width":"350px",left:"calc(100% + 1px)"})},[e("div",ge,[e("div",xe,[e("div",be,f(a.__("Notifications")),1),e("div",ve,[n(o(V),{text:a.__("Mark all as read")},{default:m(()=>[e("div",null,[n(y,{variant:"ghost",onClick:_[0]||(_[0]=()=>o(d)().mark_as_read.reload())},{icon:m(()=>[n(se,{class:"h-4 w-4"})]),_:1})])]),_:1},8,["text"]),n(o(V),{text:a.__("Close")},{default:m(()=>[e("div",null,[n(y,{variant:"ghost",onClick:_[1]||(_[1]=()=>v())},{icon:m(()=>[n(r,{name:"x",class:"h-4 w-4"})]),_:1})])]),_:1},8,["text"])])]),(k=o(d)().allNotifications)!=null&&k.length?(s(),i("div",ye,[(s(!0),i(I,null,z(o(d)().allNotifications,t=>(s(),x(l,{key:t.comment,to:$(t),class:"flex cursor-pointer items-start gap-2.5 px-4 py-2.5 hover:bg-gray-100",onClick:L=>c(t.comment||t.notification_type_doc)},{default:m(()=>[e("div",ke,[e("div",{class:g(["size-[5px] rounded-full",[t.read?"bg-transparent":"bg-gray-900"]])},null,2),t.type=="WhatsApp"?(s(),x(oe,{key:0,class:"size-7"})):(s(),x(ne,{key:1,user:t.from_user.name,size:"lg"},null,8,["user"]))]),e("div",null,[t.notification_text?(s(),i("div",{key:0,innerHTML:t.notification_text},null,8,Ce)):(s(),i("div",we,[e("span",$e,f(t.from_user.full_name),1),e("span",null,f(a.__("mentioned you in {0}",[t.reference_doctype])),1),e("span",Le,f(t.reference_name),1)])),e("div",Ne,f(a.__(o(le)(t.creation))),1)])]),_:2},1032,["to","onClick"]))),128))])):(s(),i("div",Ie,[n(A,{class:"h-20 w-20 text-gray-300"}),e("div",ze,f(a.__("No new notifications")),1)]))])],4)):w("",!0)}}},Se={class:"flex-1 overflow-y-auto"},De={class:"mb-3 flex flex-col"},Pe={key:1,class:"absolute -left-1.5 top-1 z-20 h-[5px] w-[5px] translate-x-6 translate-y-1 rounded-full bg-gray-800 ring-1 ring-white"},Me={key:0,class:"mx-2 my-2 h-1 border-b"},Oe=["onClick"],Te={class:"flex flex-col"},Ve={class:"m-2 flex flex-col gap-1"},Ae={class:"grid h-4.5 w-4.5 flex-shrink-0 place-items-center"},je={__name:"AppSidebar",setup(b){const{getPinnedViews:u,getPublicViews:p}=R(),{toggle:v}=d(),c=re("isSidebarCollapsed",!1),$=[{label:"Leads",icon:B,to:"Leads"},{label:"Deals",icon:S,to:"Deals"},{label:"Contacts",icon:D,to:"Contacts"},{label:"Organizations",icon:P,to:"Organizations"},{label:"Notes",icon:M,to:"Notes"},{label:"Tasks",icon:Y,to:"Tasks"},{label:"Call Logs",icon:O,to:"Call Logs"},{label:"Email Templates",icon:H,to:"Email Templates"}],a=X(()=>{let r=[{name:"All Views",hideLabel:!0,opened:!0,views:$}];return p().length&&r.push({name:"Public views",opened:!0,views:_(p())}),u().length&&r.push({name:"Pinned views",opened:!0,views:_(u())}),r});function _(r){return r.map(l=>({label:l.label,icon:y(l.route_name,l.icon),to:{name:l.route_name,params:{viewType:l.type||"list"},query:{view:l.name}}}))}function y(r,l){if(l)return Z("div",{class:"size-auto"},l);switch(r){case"Leads":return B;case"Deals":return S;case"Contacts":return D;case"Organizations":return P;case"Notes":return M;case"Call Logs":return O;default:return W}}return(r,l)=>{const k=C("Badge");return s(),i("div",{class:g(["relative flex h-full flex-col justify-between transition-all duration-300 ease-in-out",o(c)?"w-12":"w-[220px]"])},[e("div",null,[n(U,{class:"p-2",isCollapsed:o(c)},null,8,["isCollapsed"])]),e("div",Se,[e("div",De,[n(N,{id:"notifications-btn",label:r.__("Notifications"),icon:A,isCollapsed:o(c),onClick:l[0]||(l[0]=()=>o(v)()),class:"relative mx-2 my-0.5"},{right:m(()=>[!o(c)&&o(d)().unreadNotificationsCount?(s(),x(k,{key:0,label:o(d)().unreadNotificationsCount,variant:"subtle"},null,8,["label"])):o(d)().unreadNotificationsCount?(s(),i("div",Pe)):w("",!0)]),_:1},8,["label","isCollapsed"])]),(s(!0),i(I,null,z(a.value,t=>{var L;return s(),i("div",{key:t.label},[!t.hideLabel&&o(c)&&((L=t.views)!=null&&L.length)?(s(),i("div",Me)):w("",!0),n(F,{label:t.name,hideLabel:t.hideLabel,isOpened:t.opened},{header:m(({opened:h,hide:j,toggle:E})=>[j?w("",!0):(s(),i("div",{key:0,class:g(["flex cursor-pointer gap-1.5 px-1 text-base font-medium text-gray-600 transition-all duration-300 ease-in-out",o(c)?"ml-0 h-0 overflow-hidden opacity-0":"ml-2 mt-4 h-7 w-auto opacity-100"]),onClick:Ye=>E()},[n(o(ee),{name:"chevron-right",class:g(["h-4 text-gray-900 transition-all duration-300 ease-in-out",{"rotate-90":h}])},null,8,["class"]),e("span",null,f(r.__(t.name)),1)],10,Oe))]),default:m(()=>[e("nav",Te,[(s(!0),i(I,null,z(t.views,h=>(s(),x(N,{icon:h.icon,label:r.__(h.label),to:h.to,isCollapsed:o(c),class:"mx-2 my-0.5"},null,8,["icon","label","to","isCollapsed"]))),256))])]),_:2},1032,["label","hideLabel","isOpened"])])}),128))]),e("div",Ve,[n(N,{label:o(c)?r.__("Expand"):r.__("Collapse"),isCollapsed:o(c),onClick:l[1]||(l[1]=t=>c.value=!o(c)),class:""},{icon:m(()=>[e("span",Ae,[n(he,{class:g(["h-4.5 w-4.5 text-gray-700 duration-300 ease-in-out",{"[transform:rotateY(180deg)]":o(c)}])},null,8,["class"])])]),_:1},8,["label","isCollapsed"])]),n(Be)],2)}}},Ee={class:"flex border-b pr-5"},Fe=e("div",{id:"app-header",class:"flex-1"},null,-1),He={class:"flex items-center justify-center"},Re={__name:"AppHeader",setup(b){return(u,p)=>(s(),i("div",Ee,[Fe,e("div",He,[n(q)])]))}},We={class:"flex h-screen w-screen"},Ue={class:"h-full border-r bg-gray-50"},qe={class:"flex-1 flex flex-col h-full overflow-auto"},kt={__name:"DesktopLayout",setup(b){return(u,p)=>(s(),i("div",We,[e("div",Ue,[n(je)]),e("div",qe,[n(Re),te(u.$slots,"default")])]))}};export{kt as default};
//# sourceMappingURL=DesktopLayout-3c25d9d6.js.map
