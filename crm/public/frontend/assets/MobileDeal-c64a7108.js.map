{"version":3,"file":"MobileDeal-c64a7108.js","sources":["../../../../frontend/src/pages/MobileDeal.vue"],"sourcesContent":["<template>\n  <LayoutHeader v-if=\"deal.data\">\n    <header\n      class=\"relative flex h-12 items-center justify-between gap-2 py-2.5 pl-5\"\n    >\n      <Breadcrumbs :items=\"breadcrumbs\" />\n      <div class=\"absolute right-0\">\n        <Dropdown :options=\"statusOptions('deal', updateField)\">\n          <template #default=\"{ open }\">\n            <Button\n              :label=\"deal.data.status\"\n              :class=\"getDealStatus(deal.data.status).colorClass\"\n            >\n              <template #prefix>\n                <IndicatorIcon />\n              </template>\n              <template #suffix>\n                <FeatherIcon\n                  :name=\"open ? 'chevron-up' : 'chevron-down'\"\n                  class=\"h-4\"\n                />\n              </template>\n            </Button>\n          </template>\n        </Dropdown>\n      </div>\n    </header>\n  </LayoutHeader>\n  <div\n    v-if=\"deal.data\"\n    class=\"flex h-12 items-center justify-between gap-2 border-b px-3 py-2.5\"\n  >\n    <component :is=\"deal.data._assignedTo?.length == 1 ? 'Button' : 'div'\">\n      <MultipleAvatar\n        :avatars=\"deal.data._assignedTo\"\n        @click=\"showAssignmentModal = true\"\n      />\n    </component>\n    <div class=\"flex items-center gap-2\">\n      <CustomActions\n        v-if=\"deal.data._customActions\"\n        :actions=\"deal.data._customActions\"\n      />\n    </div>\n  </div>\n  <div v-if=\"deal.data\" class=\"flex h-full overflow-hidden\">\n    <Tabs\n      v-model=\"tabIndex\"\n      v-slot=\"{ tab }\"\n      :tabs=\"tabs\"\n      tablistClass=\"!px-3\"\n      class=\"overflow-auto\"\n    >\n      <div v-if=\"tab.name == 'Details'\">\n        <SLASection\n          v-if=\"deal.data.sla_status\"\n          v-model=\"deal.data\"\n          @updateField=\"updateField\"\n        />\n        <div\n          v-if=\"fieldsLayout.data\"\n          class=\"flex flex-1 flex-col justify-between overflow-hidden\"\n        >\n          <div class=\"flex flex-col overflow-y-auto\">\n            <div\n              v-for=\"(section, i) in fieldsLayout.data\"\n              :key=\"section.label\"\n              class=\"flex flex-col px-2 py-3 sm:p-3\"\n              :class=\"{ 'border-b': i !== fieldsLayout.data.length - 1 }\"\n            >\n              <Section :is-opened=\"section.opened\" :label=\"section.label\">\n                <template #actions>\n                  <div v-if=\"section.contacts\" class=\"pr-2\">\n                    <Link\n                      value=\"\"\n                      doctype=\"Contact\"\n                      @change=\"(e) => addContact(e)\"\n                      :onCreate=\"\n                        (value, close) => {\n                          _contact = {\n                            first_name: value,\n                            company_name: deal.data.organization,\n                          }\n                          showContactModal = true\n                          close()\n                        }\n                      \"\n                    >\n                      <template #target=\"{ togglePopover }\">\n                        <Button\n                          class=\"h-7 px-3\"\n                          variant=\"ghost\"\n                          icon=\"plus\"\n                          @click=\"togglePopover()\"\n                        />\n                      </template>\n                    </Link>\n                  </div>\n                </template>\n                <SectionFields\n                  v-if=\"section.fields\"\n                  :fields=\"section.fields\"\n                  v-model=\"deal.data\"\n                  @update=\"updateField\"\n                />\n                <div v-else>\n                  <div\n                    v-if=\"\n                      deal_contacts?.loading && deal_contacts?.data?.length == 0\n                    \"\n                    class=\"flex min-h-20 flex-1 items-center justify-center gap-3 text-base text-gray-500\"\n                  >\n                    <LoadingIndicator class=\"h-4 w-4\" />\n                    <span>{{ __('Loading...') }}</span>\n                  </div>\n                  <div\n                    v-else-if=\"section.contacts.length\"\n                    v-for=\"(contact, i) in section.contacts\"\n                    :key=\"contact.name\"\n                  >\n                    <div\n                      class=\"px-2 pb-2.5\"\n                      :class=\"[i == 0 ? 'pt-5' : 'pt-2.5']\"\n                    >\n                      <Section :is-opened=\"contact.opened\">\n                        <template #header=\"{ opened, toggle }\">\n                          <div\n                            class=\"flex cursor-pointer items-center justify-between gap-2 pr-1 text-base leading-5 text-gray-700\"\n                          >\n                            <div\n                              class=\"flex h-7 items-center gap-2 truncate\"\n                              @click=\"toggle()\"\n                            >\n                              <Avatar\n                                :label=\"contact.full_name\"\n                                :image=\"contact.image\"\n                                size=\"md\"\n                              />\n                              <div class=\"truncate\">\n                                {{ contact.full_name }}\n                              </div>\n                              <Badge\n                                v-if=\"contact.is_primary\"\n                                class=\"ml-2\"\n                                variant=\"outline\"\n                                :label=\"__('Primary')\"\n                                theme=\"green\"\n                              />\n                            </div>\n                            <div class=\"flex items-center\">\n                              <Dropdown :options=\"contactOptions(contact.name)\">\n                                <Button\n                                  icon=\"more-horizontal\"\n                                  class=\"text-gray-600\"\n                                  variant=\"ghost\"\n                                />\n                              </Dropdown>\n                              <Button\n                                variant=\"ghost\"\n                                @click=\"\n                                  router.push({\n                                    name: 'Contact',\n                                    params: { contactId: contact.name },\n                                  })\n                                \"\n                              >\n                                <ArrowUpRightIcon class=\"h-4 w-4\" />\n                              </Button>\n                              <Button variant=\"ghost\" @click=\"toggle()\">\n                                <FeatherIcon\n                                  name=\"chevron-right\"\n                                  class=\"h-4 w-4 text-gray-900 transition-all duration-300 ease-in-out\"\n                                  :class=\"{ 'rotate-90': opened }\"\n                                />\n                              </Button>\n                            </div>\n                          </div>\n                        </template>\n                        <div\n                          class=\"flex flex-col gap-1.5 text-base text-gray-800\"\n                        >\n                          <div class=\"flex items-center gap-3 pb-1.5 pl-1 pt-4\">\n                            <EmailIcon class=\"h-4 w-4\" />\n                            {{ contact.email }}\n                          </div>\n                          <div class=\"flex items-center gap-3 p-1 py-1.5\">\n                            <PhoneIcon class=\"h-4 w-4\" />\n                            {{ contact.mobile_no }}\n                          </div>\n                        </div>\n                      </Section>\n                    </div>\n                    <div\n                      v-if=\"i != section.contacts.length - 1\"\n                      class=\"mx-2 h-px border-t border-gray-200\"\n                    />\n                  </div>\n                  <div\n                    v-else\n                    class=\"flex h-20 items-center justify-center text-base text-gray-600\"\n                  >\n                    {{ __('No contacts added') }}\n                  </div>\n                </div>\n              </Section>\n            </div>\n          </div>\n        </div>\n      </div>\n      <Activities\n        v-else\n        doctype=\"CRM Deal\"\n        :title=\"tab.name\"\n        v-model:reload=\"reload\"\n        v-model:tabIndex=\"tabIndex\"\n        v-model=\"deal\"\n      />\n    </Tabs>\n  </div>\n  <OrganizationModal\n    v-model=\"showOrganizationModal\"\n    v-model:organization=\"_organization\"\n    :options=\"{\n      redirect: false,\n      afterInsert: (doc) =>\n        updateField('organization', doc.name, () => {\n          organizations.reload()\n        }),\n    }\"\n  />\n  <ContactModal\n    v-model=\"showContactModal\"\n    :contact=\"_contact\"\n    :options=\"{\n      redirect: false,\n      afterInsert: (doc) => addContact(doc.name),\n    }\"\n  />\n  <AssignmentModal\n    v-if=\"showAssignmentModal\"\n    v-model=\"showAssignmentModal\"\n    v-model:assignees=\"deal.data._assignedTo\"\n    :doc=\"deal.data\"\n    doctype=\"CRM Deal\"\n  />\n</template>\n<script setup>\nimport DetailsIcon from '@/components/Icons/DetailsIcon.vue'\nimport LoadingIndicator from '@/components/Icons/LoadingIndicator.vue'\nimport ActivityIcon from '@/components/Icons/ActivityIcon.vue'\nimport EmailIcon from '@/components/Icons/EmailIcon.vue'\nimport CommentIcon from '@/components/Icons/CommentIcon.vue'\nimport PhoneIcon from '@/components/Icons/PhoneIcon.vue'\nimport TaskIcon from '@/components/Icons/TaskIcon.vue'\nimport NoteIcon from '@/components/Icons/NoteIcon.vue'\nimport WhatsAppIcon from '@/components/Icons/WhatsAppIcon.vue'\nimport IndicatorIcon from '@/components/Icons/IndicatorIcon.vue'\nimport ArrowUpRightIcon from '@/components/Icons/ArrowUpRightIcon.vue'\nimport SuccessIcon from '@/components/Icons/SuccessIcon.vue'\nimport LayoutHeader from '@/components/LayoutHeader.vue'\nimport Activities from '@/components/Activities.vue'\nimport OrganizationModal from '@/components/Modals/OrganizationModal.vue'\nimport AssignmentModal from '@/components/Modals/AssignmentModal.vue'\nimport MultipleAvatar from '@/components/MultipleAvatar.vue'\nimport ContactModal from '@/components/Modals/ContactModal.vue'\nimport Link from '@/components/Controls/Link.vue'\nimport Section from '@/components/Section.vue'\nimport SectionFields from '@/components/SectionFields.vue'\nimport SLASection from '@/components/SLASection.vue'\nimport CustomActions from '@/components/CustomActions.vue'\nimport {\n  createToast,\n  setupAssignees,\n  setupCustomActions,\n  errorMessage,\n} from '@/utils'\nimport { globalStore } from '@/stores/global'\nimport { organizationsStore } from '@/stores/organizations'\nimport { statusesStore } from '@/stores/statuses'\nimport { whatsappEnabled, callEnabled, isMobileView } from '@/composables/settings'\nimport {\n  createResource,\n  Dropdown,\n  Avatar,\n  Tabs,\n  Breadcrumbs,\n  call,\n} from 'frappe-ui'\nimport { ref, computed, h, onMounted } from 'vue'\nimport { useRouter } from 'vue-router'\n\nconst { $dialog, makeCall } = globalStore()\nconst { organizations, getOrganization } = organizationsStore()\nconst { statusOptions, getDealStatus } = statusesStore()\nconst router = useRouter()\n\nconst props = defineProps({\n  dealId: {\n    type: String,\n    required: true,\n  },\n})\n\nconst deal = createResource({\n  url: 'crm.fcrm.doctype.crm_deal.api.get_deal',\n  params: { name: props.dealId },\n  cache: ['deal', props.dealId],\n  onSuccess: (data) => {\n    setupAssignees(data)\n    setupCustomActions(data, {\n      doc: data,\n      $dialog,\n      router,\n      updateField,\n      createToast,\n      deleteDoc: deleteDeal,\n      call,\n    })\n  },\n})\n\nonMounted(() => {\n  if (deal.data) return\n  deal.fetch()\n})\n\nconst reload = ref(false)\nconst showOrganizationModal = ref(false)\nconst showAssignmentModal = ref(false)\nconst _organization = ref({})\n\nconst organization = computed(() => {\n  return deal.data?.organization && getOrganization(deal.data.organization)\n})\n\nfunction updateDeal(fieldname, value, callback) {\n  value = Array.isArray(fieldname) ? '' : value\n\n  if (validateRequired(fieldname, value)) return\n\n  createResource({\n    url: 'frappe.client.set_value',\n    params: {\n      doctype: 'CRM Deal',\n      name: props.dealId,\n      fieldname,\n      value,\n    },\n    auto: true,\n    onSuccess: () => {\n      deal.reload()\n      reload.value = true\n      createToast({\n        title: __('Deal updated'),\n        icon: 'check',\n        iconClasses: 'text-green-600',\n      })\n      callback?.()\n    },\n    onError: (err) => {\n      createToast({\n        title: __('Error updating deal'),\n        text: __(err.messages?.[0]),\n        icon: 'x',\n        iconClasses: 'text-red-600',\n      })\n    },\n  })\n}\n\nfunction validateRequired(fieldname, value) {\n  let meta = deal.data.fields_meta || {}\n  if (meta[fieldname]?.reqd && !value) {\n    createToast({\n      title: __('Error Updating Deal'),\n      text: __('{0} is a required field', [meta[fieldname].label]),\n      icon: 'x',\n      iconClasses: 'text-red-600',\n    })\n    return true\n  }\n  return false\n}\n\nconst breadcrumbs = computed(() => {\n  let items = [{ label: __('Deals'), route: { name: 'Deals' } }]\n  items.push({\n    label: organization.value?.name || __('Untitled'),\n    route: { name: 'Deal', params: { dealId: deal.data.name } },\n  })\n  return items\n})\n\nconst tabIndex = ref(0)\nconst tabs = computed(() => {\n  let tabOptions = [\n    {\n      name: 'Details',\n      label: __('Details'),\n      icon: DetailsIcon,\n      condition: () => isMobileView.value,\n    },\n    {\n      name: 'Activity',\n      label: __('Activity'),\n      icon: ActivityIcon,\n    },\n    {\n      name: 'Emails',\n      label: __('Emails'),\n      icon: EmailIcon,\n    },\n    {\n      name: 'Comments',\n      label: __('Comments'),\n      icon: CommentIcon,\n    },\n    {\n      name: 'Calls',\n      label: __('Calls'),\n      icon: PhoneIcon,\n      condition: () => callEnabled.value,\n    },\n    {\n      name: 'Tasks',\n      label: __('Tasks'),\n      icon: TaskIcon,\n    },\n    {\n      name: 'Notes',\n      label: __('Notes'),\n      icon: NoteIcon,\n    },\n    {\n      name: 'WhatsApp',\n      label: __('WhatsApp'),\n      icon: WhatsAppIcon,\n      condition: () => whatsappEnabled.value,\n    },\n  ]\n  return tabOptions.filter((tab) => (tab.condition ? tab.condition() : true))\n})\n\nconst fieldsLayout = createResource({\n  url: 'crm.api.doc.get_sidebar_fields',\n  cache: ['fieldsLayout', props.dealId],\n  params: { doctype: 'CRM Deal', name: props.dealId },\n  auto: true,\n  transform: (data) => getParsedFields(data),\n})\n\nfunction getParsedFields(sections) {\n  sections.forEach((section) => {\n    if (section.name == 'contacts_section') return\n    section.fields.forEach((field) => {\n      if (field.name == 'organization') {\n        field.create = (value, close) => {\n          _organization.value.organization_name = value\n          showOrganizationModal.value = true\n          close()\n        }\n        field.link = (org) =>\n          router.push({\n            name: 'Organization',\n            params: { organizationId: org },\n          })\n      }\n    })\n  })\n  return sections\n}\n\nconst showContactModal = ref(false)\nconst _contact = ref({})\n\nfunction contactOptions(contact) {\n  let options = [\n    {\n      label: __('Delete'),\n      icon: 'trash-2',\n      onClick: () => removeContact(contact),\n    },\n  ]\n\n  if (!contact.is_primary) {\n    options.push({\n      label: __('Set as Primary Contact'),\n      icon: h(SuccessIcon, { class: 'h-4 w-4' }),\n      onClick: () => setPrimaryContact(contact),\n    })\n  }\n\n  return options\n}\n\nasync function addContact(contact) {\n  let d = await call('crm.fcrm.doctype.crm_deal.crm_deal.add_contact', {\n    deal: props.dealId,\n    contact,\n  })\n  if (d) {\n    deal_contacts.reload()\n    createToast({\n      title: __('Contact added'),\n      icon: 'check',\n      iconClasses: 'text-green-600',\n    })\n  }\n}\n\nasync function removeContact(contact) {\n  let d = await call('crm.fcrm.doctype.crm_deal.crm_deal.remove_contact', {\n    deal: props.dealId,\n    contact,\n  })\n  if (d) {\n    deal_contacts.reload()\n    createToast({\n      title: __('Contact removed'),\n      icon: 'check',\n      iconClasses: 'text-green-600',\n    })\n  }\n}\n\nasync function setPrimaryContact(contact) {\n  let d = await call('crm.fcrm.doctype.crm_deal.crm_deal.set_primary_contact', {\n    deal: props.dealId,\n    contact,\n  })\n  if (d) {\n    deal_contacts.reload()\n    createToast({\n      title: __('Primary contact set'),\n      icon: 'check',\n      iconClasses: 'text-green-600',\n    })\n  }\n}\n\nconst deal_contacts = createResource({\n  url: 'crm.fcrm.doctype.crm_deal.api.get_deal_contacts',\n  params: { name: props.dealId },\n  cache: ['deal_contacts', props.dealId],\n  auto: true,\n  onSuccess: (data) => {\n    let contactSection = fieldsLayout.data?.find(\n      (section) => section.name == 'contacts_section',\n    )\n    if (!contactSection) return\n    contactSection.contacts = data.map((contact) => {\n      return {\n        name: contact.name,\n        full_name: contact.full_name,\n        email: contact.email,\n        mobile_no: contact.mobile_no,\n        image: contact.image,\n        is_primary: contact.is_primary,\n        opened: false,\n      }\n    })\n  },\n})\n\nfunction updateField(name, value, callback) {\n  updateDeal(name, value, () => {\n    deal.data[name] = value\n    callback?.()\n  })\n}\n\nasync function deleteDeal(name) {\n  await call('frappe.client.delete', {\n    doctype: 'CRM Deal',\n    name,\n  })\n  router.push({ name: 'Deals' })\n}\n</script>\n"],"names":["$dialog","makeCall","globalStore","organizations","getOrganization","organizationsStore","statusOptions","getDealStatus","statusesStore","router","useRouter","props","__props","deal","createResource","data","setupAssignees","setupCustomActions","updateField","createToast","deleteDeal","call","onMounted","reload","ref","showOrganizationModal","showAssignmentModal","_organization","organization","computed","_a","updateDeal","fieldname","value","callback","validateRequired","err","meta","breadcrumbs","items","tabIndex","tabs","DetailsIcon","isMobileView","ActivityIcon","EmailIcon","CommentIcon","PhoneIcon","callEnabled","TaskIcon","NoteIcon","WhatsAppIcon","whatsappEnabled","tab","fieldsLayout","getParsedFields","sections","section","field","close","org","showContactModal","_contact","contactOptions","contact","options","removeContact","h","SuccessIcon","setPrimaryContact","addContact","deal_contacts","contactSection","name"],"mappings":"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"}